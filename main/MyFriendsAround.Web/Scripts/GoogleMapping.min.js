if (GBrowserIsCompatible()) { var map = new GMap(document.getElementById("map")); map.setCenter(new google.maps.LatLng(51.44, -0.18), 5); map.addControl(new GLargeMapControl()); map.addControl(new GMapTypeControl()); var gmarkers = []; var htmls = []; var i = 0; function createMarker(a, c, d) { var b = new GMarker(a); GEvent.addListener(b, "click", function() { b.openInfoWindowHtml(d) }); gmarkers[i] = b; htmls[i] = d; i++; return b } function myclick(a) { gmarkers[a].openInfoWindowHtml(htmls[a]) } processJson = function(doc) { var jsonData = eval("(" + doc + ")"); for (var i = 0; i < jsonData.markers.length; i++) { var point = new GLatLng(jsonData.markers[i].lat, jsonData.markers[i].lng); var marker = createMarker(point, jsonData.markers[i].label, jsonData.markers[i].html); map.addOverlay(marker) } }; var markerUrl = document.getElementById("MarkerUrl").value; GDownloadUrl(markerUrl, processJson) } else { alert("Sorry, the Google Maps API is not compatible with this browser") };